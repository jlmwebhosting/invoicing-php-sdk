<?php

require_once 'WSDLInterpreter.php';
require 'PHPGenerator.php';

// Main execution is simple - check for command line arguments,
// execute proper command. Default is to just output usage
// information.

// Defaults:
$command = null;
$path = false;

try {

	// Process command line arguments.
	switch (count($_SERVER['argv'])) {
	case 2:
		echo "Generating Stubs... \n" ;
		$wsdlInterpreter = new WSDLInterpreter($_SERVER['argv'][1]);
		$wsdlInterpreter->addGenerator(new PHPGenerator('../../php_sdk/samples/web/lib/Stub'));
		$wsdlInterpreter->generate();
		echo "Stubs are updated in 'samples/web/lib/Stub'" ;
	    break;
	case 3:
		echo "Generating Stubs... \n" ;
		$wsdlInterpreter = new WSDLInterpreter($_SERVER['argv'][1]);
		$wsdlInterpreter->addGenerator(new PHPGenerator($_SERVER['argv'][2]));		
		$wsdlInterpreter->generate();
		echo "Stubs are updated in '" . $_SERVER['argv'][2] . "'" ;
	    break;
	default:
	    usage();
	}
}
catch(Exception $ex) {
	echo $ex->getMessage();
}


/**
 * Print usage information.
 */
function usage()
{
    echo <<<USAGE
Usage: GenerateStubs <path to wsdl file> <path to create php stub files>

Examples:
  GenerateStubs  <path to wsdl file> <path to create php stub files> # Generates the Proxy object

USAGE;

    exit;
}

?>
